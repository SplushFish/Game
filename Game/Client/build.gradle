apply plugin: "java"
apply plugin: "eclipse"

sourceCompatibility = 1.8
version = "1.0"

ext {
	name = "Client"
	mainClass = "TestClass"
	nettyVersion = "4.1.10.Final"
	lwjglVersion = "3.0.0"
}

uploadArchives {
    repositories {
       flatDir {
           dirs "repos"
       }
    }
}

repositories {
    mavenCentral()
    maven { 
    	url "https://oss.sonatype.org/content/repositories/snapshots/" 
    }
}

dependencies {
	compile project(":AuthClient")
	compile project(":Common")
    compile "io.netty:netty-all:${nettyVersion}"
    compile "org.lwjgl:lwjgl:${lwjglVersion}"
	compile "org.lwjgl:lwjgl-platform:${lwjglVersion}:natives-windows"
	compile "org.lwjgl:lwjgl-platform:${lwjglVersion}:natives-linux"
	compile "org.lwjgl:lwjgl-platform:${lwjglVersion}:natives-osx"
}

sourceSets {
	main.java.srcDir "src/main/java"
	test.java.srcDir "src/test/java"
}

jar {
	from configurations.compile.collect {
		zipTree it
	}
    manifest {
        attributes "Implementation-Title": name,
                   "Implementation-Version": version,
                   "Main-Class": mainClass
    }
}

task run(type: JavaExec, dependsOn: classes) {
	main mainClass
	classpath sourceSets.main.runtimeClasspath
}

task runJar(type: Exec, dependsOn: [jar, build]) {
	executable 'java'
	args '-jar', "$jar.archivePath"
}